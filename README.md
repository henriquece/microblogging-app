# Microblogging App

## Running
### Local
- Go to "infra/local/docker-compose" folder.

- Create an ".env" file based on "env" file and add the Postgres password on both POSTGRES_PASSWORD and ConnectionStrings__AppDbConnectionString env vars.

- Run: `docker-compose up backend frontend`

- Done! 
  - The frontend app is available at http://localhost:5273.
  - The api is available at http://localhost:5100.
  - Swagger is available at http://localhost:5100/swagger/index.html.

- Obs: Migrations are not applied automatically. To apply, run `docker-compose run migrate`.

### Prod
#### Using EC2
##### First deploy
- Apply Terraform configuration located at "infra/prod/using-ec2/terraform": `terraform apply`

- Add an A record on DNS configuration, mapping "microblogging-app.henriquece.dev" to the ec2 instance's IP generated by previous step.

- Connect to the ec2 instance and, in the "/microblogging-app/infra/prod/using-ec2/docker-compose" folder, create an ".env" file based on "env" file and add the Postgres password on both POSTGRES_PASSWORD and ConnectionStrings__AppDbConnectionString env vars.

- Run the file "init.sh" located in the "/microblogging-app/infra/prod/using-ec2/ec2" folder: `sh init.sh`

- Finished! 
  - The app is available at https://microblogging-app.henriquece.dev.
  - The api is available at https://microblogging-app.henriquece.dev/api.

##### Other deploys
